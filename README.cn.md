# Sketch MCP æœåŠ¡å™¨

[English](./README.md) | **ä¸­æ–‡**

ä¸€ä¸ªåŸºäºæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰çš„ Sketch æ–‡ä»¶å¤„ç†æœåŠ¡å™¨ï¼Œä¸“ä¸º AI å·¥å…·è®¾è®¡ï¼Œæ”¯æŒæ™ºèƒ½åˆ†æ Sketch è®¾è®¡æ–‡ä»¶å¹¶ç”Ÿæˆ Vue ç»„ä»¶ä»£ç ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **Sketch æ–‡ä»¶åˆ†æ**ï¼šå…¨é¢è§£æ Sketch æ–‡ä»¶ï¼Œæå–èŠ‚ç‚¹ã€æ ·å¼ã€å±‚çº§ç­‰å®Œæ•´ä¿¡æ¯
- ğŸš€ **Token æ™ºèƒ½ä¼˜åŒ–**ï¼šæœ€é«˜å¯å‡å°‘ 90% çš„ Token æ¶ˆè€—ï¼Œå¤§å¹…é™ä½ AI è°ƒç”¨æˆæœ¬
- ğŸ” **æ™ºèƒ½æŸ¥è¯¢ç³»ç»Ÿ**ï¼š16 ä¸ªä¸“ä¸šå·¥å…·ï¼Œé«˜æ•ˆå‘ç°å’Œåˆ†æè®¾è®¡å…ƒç´ 
- ğŸ¯ **Symbol ç»„ä»¶æ”¯æŒ**ï¼šå®Œæ•´çš„ Symbol Master å’Œ Instance å¤„ç†èƒ½åŠ›
- ğŸ–¼ï¸ **å¯è§†åŒ–æ¸²æŸ“**ï¼šå°†è®¾è®¡èŠ‚ç‚¹æ¸²æŸ“ä¸º SVG/PNG å›¾åƒä¾› AI åˆ†æ
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡åˆ†æ**ï¼šæä¾›æ–‡æ¡£å’ŒèŠ‚ç‚¹çš„å…¨é¢ç»Ÿè®¡ä¿¡æ¯
- ğŸ”§ **CLI å·¥å…·æ”¯æŒ**ï¼šæ”¯æŒ npx ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€å®‰è£…

## ğŸ“¦ å®‰è£…æ–¹å¼

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g sketch-mcp-server
```

### ä½¿ç”¨ npxï¼ˆæ— éœ€å®‰è£…ï¼‰

```bash
npx sketch-mcp-server
```

### æœ¬åœ°é¡¹ç›®å®‰è£…

```bash
npm install sketch-mcp-server
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‘½ä»¤è¡Œå¯åŠ¨

```bash
# å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆstdio æ¨¡å¼ï¼‰
sketch-mcp-server

# æˆ–ä½¿ç”¨ npx
npx sketch-mcp-server
```

### AI å·¥å…·é›†æˆ

æœ¬æœåŠ¡å™¨ä¸“ä¸ºä»¥ä¸‹ AI å¼€å‘ç¯å¢ƒè®¾è®¡ï¼š

- **Trae AI**ï¼šä½œä¸º MCP æœåŠ¡å™¨è¿›è¡Œ Sketch æ–‡ä»¶åˆ†æ
- **Cursor**ï¼šé…ç½®ä¸º MCP å·¥å…·å®ç°è®¾è®¡åˆ°ä»£ç çš„å·¥ä½œæµ
- **Claude Desktop**ï¼šç”¨äº Sketch æ–‡ä»¶å¤„ç†å’Œåˆ†æ

### Trae AI é…ç½®ç¤ºä¾‹

åœ¨ Trae AI ä¸­æ·»åŠ  MCP æœåŠ¡å™¨é…ç½®ï¼š

```json
{
  "mcpServers": {
    "sketch-mcp-server": {
      "command": "npx",
      "args": ["sketch-mcp-server"]
    }
  }
}
```

## ğŸ› ï¸ å·¥å…·åˆ—è¡¨

### ğŸ“ æ–‡ä»¶åŠ è½½å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° |
|---------|----------|
| `loadSketchByPath` | ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½ Sketch æ–‡ä»¶ |
| `loadSketchByConfig` | ä»é…ç½®å¯¹è±¡åŠ è½½ Sketch æ•°æ® |

### ğŸ“Š æ–‡æ¡£ç»“æ„å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | ä¼˜åŒ–ç‰¹æ€§ |
|---------|----------|----------|
| `getDocumentStructure` | è·å–å®Œæ•´æ–‡æ¡£å±‚çº§ç»“æ„ | ğŸš€ æ”¯æŒå­—æ®µè¿‡æ»¤å’Œæ‘˜è¦æ¨¡å¼ |
| `getPageStructure` | è·å–å•ä¸ªé¡µé¢ç»“æ„ | - |
| `listPages` | åˆ—å‡ºæ‰€æœ‰é¡µé¢åŸºæœ¬ä¿¡æ¯ | - |

### ğŸ¯ èŠ‚ç‚¹æŸ¥è¯¢å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | Token ä¼˜åŒ– |
|---------|----------|------------|
| `getNodesSummary` | **æ™ºèƒ½èŠ‚ç‚¹æ‘˜è¦** | ğŸ”¥ å‡å°‘ 80-90% Token |
| `listNodes` | åˆ—å‡ºèŠ‚ç‚¹ï¼ˆæ”¯æŒè¿‡æ»¤ï¼‰ | - |
| `listNodesByPage` | æŒ‰é¡µé¢åˆ—å‡ºèŠ‚ç‚¹ | - |
| `findNodesByName` | æŒ‰åç§°æœç´¢èŠ‚ç‚¹ | - |

### ğŸ” è¯¦ç»†ä¿¡æ¯å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° |
|---------|----------|
| `getNodeInfo` | è·å–å•ä¸ªèŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯ |
| `getMultipleNodeInfo` | æ‰¹é‡è·å–èŠ‚ç‚¹ä¿¡æ¯ï¼ˆæœ€å¤š100ä¸ªï¼‰ |
| `getNodePosition` | è·å–èŠ‚ç‚¹ä½ç½®ä¿¡æ¯ |

### ğŸ”„ Symbol ç»„ä»¶å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° |
|---------|----------|
| `getSymbolMasters` | è·å–æ‰€æœ‰ Symbol Master |
| `getSymbolInstances` | è·å–æ‰€æœ‰ Symbol Instance |
| `getSymbolMasterBySymbolID` | æ ¹æ® Symbol ID æŸ¥æ‰¾ Master |
| `getSymbolInstanceStyles` | è·å–å®ä¾‹æ ·å¼ï¼ˆå«è¦†ç›–æ ·å¼ï¼‰ |

### ğŸ¨ å¯è§†åŒ–å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° |
|---------|----------|
| `renderNodeAsBase64` | å°†èŠ‚ç‚¹æ¸²æŸ“ä¸ºå›¾åƒï¼ˆSVG/PNGï¼‰ |

## ğŸ’¡ Token ä¼˜åŒ–ç­–ç•¥

### æ•°æ®é‡å¯¹æ¯”

| å·¥å…·/æ¨¡å¼ | Token å‡å°‘ | é€‚ç”¨åœºæ™¯ |
|-----------|------------|----------|
| `getNodesSummary` | 80-90% | åˆæ­¥åˆ†æã€äº†è§£æ•´ä½“ç»“æ„ |
| `getDocumentStructure`ï¼ˆæ‘˜è¦æ¨¡å¼ï¼‰ | 70-85% | å¿«é€Ÿäº†è§£æ–‡æ¡£ç»“æ„ |
| `getDocumentStructure`ï¼ˆå­—æ®µè¿‡æ»¤ï¼‰ | 30-50% | ç»“æ„åˆ†æ |
| å®Œæ•´æ¨¡å¼ | 0% | è¯¦ç»†è®¾è®¡éœ€æ±‚ |

### æ¨èå·¥ä½œæµç¨‹

1. **ğŸ” å¿«é€Ÿåˆ†æ**ï¼šä½¿ç”¨ `getNodesSummary` äº†è§£æ•´ä½“è®¾è®¡ç»“æ„
2. **ğŸ“‹ ç»“æ„åˆ†æ**ï¼šä½¿ç”¨å­—æ®µè¿‡æ»¤çš„ `getDocumentStructure` è·å–å±‚çº§å…³ç³»
3. **ğŸ¯ è¯¦ç»†ä¿¡æ¯**ï¼šæŒ‰éœ€è·å–ç‰¹å®šèŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯
4. **ğŸ‘ï¸ å¯è§†åŒ–éªŒè¯**ï¼šæ¸²æŸ“å…³é”®ç»„ä»¶ç¡®è®¤æ•ˆæœ

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€å·¥ä½œæµç¨‹

```javascript
// 1. åŠ è½½ Sketch æ–‡ä»¶
{
  "name": "loadSketchByPath",
  "arguments": {
    "path": "/path/to/design.sketch"
  }
}

// 2. è·å–æ™ºèƒ½æ‘˜è¦ï¼ˆèŠ‚çœ 80-90% Tokenï¼‰
{
  "name": "getNodesSummary",
  "arguments": {
    "groupBy": "type",
    "includeStats": true,
    "maxSamples": 5
  }
}

// 3. è·å–ç‰¹å®šèŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯
{
  "name": "getMultipleNodeInfo",
  "arguments": {
    "nodeIds": ["button-id", "text-id"]
  }
}

// 4. æ¸²æŸ“èŠ‚ç‚¹ä¸ºå›¾åƒ
{
  "name": "renderNodeAsBase64",
  "arguments": {
    "nodeId": "button-id",
    "format": "svg"
  }
}
```

### é«˜çº§ä¼˜åŒ–ç¤ºä¾‹

```javascript
// ä½¿ç”¨å­—æ®µè¿‡æ»¤å‡å°‘æ•°æ®é‡
{
  "name": "getDocumentStructure",
  "arguments": {
    "fields": ["id", "name", "type", "children"],
    "maxDepth": 3,
    "summaryMode": false
  }
}

// æŒ‰æ ·å¼åˆ†ç»„çš„æ™ºèƒ½æ‘˜è¦
{
  "name": "getNodesSummary",
  "arguments": {
    "groupBy": "style",
    "includeStats": true,
    "maxSamples": 3
  }
}
```

## ğŸ¯ å·¥å…·é€‰æ‹©æŒ‡å—

| ä½¿ç”¨éœ€æ±‚ | æ¨èå·¥å…· | Token æ•ˆç‡ | è¯´æ˜ |
|----------|----------|------------|------|
| äº†è§£æ•´ä½“ç»“æ„ | `getNodesSummary` | â­â­â­â­â­ | æœ€é«˜æ•ˆçš„æ¦‚è§ˆæ–¹å¼ |
| åˆ†æé¡µé¢å±‚çº§ | `getDocumentStructure`ï¼ˆè¿‡æ»¤ï¼‰ | â­â­â­â­ | ç»“æ„åŒ–å±‚çº§ä¿¡æ¯ |
| æŸ¥æ‰¾ç‰¹å®šèŠ‚ç‚¹ | `findNodesByName` | â­â­â­ | ç²¾ç¡®æœç´¢ |
| è·å–è¯¦ç»†ä¿¡æ¯ | `getMultipleNodeInfo` | â­â­ | æ‰¹é‡è·å– |
| å¤„ç† Symbol ç»„ä»¶ | `getSymbolMasters` | â­â­â­ | ç»„ä»¶åŒ–è®¾è®¡ |
| å¯è§†åŒ–ç¡®è®¤ | `renderNodeAsBase64` | â­â­ | ç›´è§‚æŸ¥çœ‹æ•ˆæœ |

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm æˆ– yarn

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/mater1996/sketch-mcp-server.git
cd sketch-mcp-server

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start:mcp
```

### å¯ç”¨è„šæœ¬

```bash
npm run build          # æ„å»º TypeScript åˆ° JavaScript
npm run test           # è¿è¡Œæµ‹è¯•å¥—ä»¶
npm run test:coverage  # è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run start          # å¯åŠ¨ HTTP æœåŠ¡å™¨
npm run start:mcp      # å¯åŠ¨ MCP stdio æœåŠ¡å™¨
npm run release        # å‘å¸ƒæ–°ç‰ˆæœ¬
npm run release:dry    # æ¨¡æ‹Ÿå‘å¸ƒæµç¨‹
```

## ğŸ“š API å‚è€ƒ

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ [å·¥å…·ä½¿ç”¨æŒ‡å—](./mcp-prompt.txt)ã€‚

### å¼€å‘è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™ä»£ç 
- éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼
- ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
